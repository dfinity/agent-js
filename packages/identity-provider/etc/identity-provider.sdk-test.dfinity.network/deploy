#!/usr/bin/env sh

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"
IDENTITY_PROVIDER="$DIR/../../"
IDENTITY_PROVIDER_BUILT="$IDENTITY_PROVIDER/dist/"
REMOTE_HOST="zh1-ngx01.dfinity.network"
REMOTE_CHOWN="root:html"
REMOTE_CHMOD="u+rwx,g+rwx,o+r"

# e.g. provide your own '--verbose --progress'
RSYNC_FLAGS="$@"

rsync $RSYNC_FLAGS \
--omit-dir-times \
--human-readable \
--archive \
--chown="$REMOTE_CHOWN" \
--chmod="$REMOTE_CHMOD" \
"$IDENTITY_PROVIDER_BUILT" "$REMOTE_HOST":/var/www/identity-provider.sdk-test.dfinity.network/
